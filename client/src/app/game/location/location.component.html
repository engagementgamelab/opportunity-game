<div class="location {{currentLocation?.image}}">
	
	<div id="back" routerLink="/game/home" class="btn">
		<cdn-image cloudinaryId="opportunity-game/icons/home.svg" width="50" alt="Back to Home"></cdn-image>
	</div>

	 	<div id="list" class="col-6">
			<button *ngFor="let opportunity of currentLocation?.opportunities" (click)="viewOpportunity(opportunity._id)" class="col-6 bold" id="listing_{{opportunity._id}}">

					<div class="name">
						{{opportunity.name}}
					</div>

					<!-- Rewards -->
					<div class="reward">
						<div class="badge" *ngFor="let badge of opportunity.reward.badges">
							<cdn-image cloudinaryId="opportunity-game/icons/{{badge}}.svg" width="25" alt="Icon for Badge"></cdn-image>
						</div>
						<div class="icon">
							<cdn-image cloudinaryId="opportunity-game/icons/{{opportunity.reward.icon}}.svg" width="75" alt="Icon for Reward"></cdn-image>
						</div>

					</div>

					<!-- Requires: {{opportunity.type}} -->
					<div class="costs row col-6">
						<div class="{{cost.icon}} cost col-1" [class.notenough]="cost.has !== undefined && !cost.has" *ngFor="let cost of opportunity.costs"><span *ngIf="cost.amt !== undefined">{{cost.amt}}</span></div>
					</div>
			</button>
		</div>

		<div id="details" class="modal hidden">
			<div *ngFor="let opportunity of currentLocation?.opportunities" class="opportunity col-5 col-centered vert-center medium hidden" id="detail_{{opportunity._id}}">
					<div>
							Would you like to <span class="bold">{{opportunity.name | cleanString}}</span>?
					</div>
					<div class="row">
						<div class="stars col-1 col-centered">
							<div *ngFor="let i of opportunity.stars" class="star nudge{{i.nudge}}">
								<cdn-image cloudinaryId="opportunity-game/icons/star-{{i.index}}.svg" alt="Icon for Job reward"></cdn-image>
							</div>
						</div>

						<!-- Rewards -->
						<div class="reward col-2 col-centered no-pad" *ngIf="opportunity.commReward > 0">
							<cdn-image cloudinaryId="opportunity-game/icons/community.svg" alt="Icon for Community reward"></cdn-image>
						</div>
						<div class="reward col-2 no-pad" *ngIf="opportunity.englishReward > 0">
							<cdn-image cloudinaryId="opportunity-game/icons/english.svg" alt="Icon for English reward"></cdn-image>
						</div>
						<div class="reward col-2 col-centered no-pad" *ngIf="opportunity.jobReward > 0">
							<cdn-image cloudinaryId="opportunity-game/icons/training-color.svg" alt="Icon for Job reward"></cdn-image>
						</div>

						<div class="stars col-1 col-centered">
							<div *ngFor="let i of opportunity.stars" class="star nudge{{i.nudge}}">
								<cdn-image cloudinaryId="opportunity-game/icons/star-{{i.index}}.svg" alt="Icon for Job reward"></cdn-image>
							</div>
						</div>
						
					</div>

					<div class="footer">
							This opportunity costs 
							<span *ngIf="opportunity.actionCost > 0 && opportunity.moneyCost <= 0">{{opportunity.actionCost}} actions.</span>
							<span *ngIf="opportunity.moneyCost > 0 && opportunity.actionCost <= 0">{{opportunity.moneyCost}} money.</span>
							<span *ngIf="opportunity.moneyCost > 0 && opportunity.actionCost > 0">{{opportunity.actionCost}} actions & {{opportunity.moneyCost}} money.</span>
							<span class="bold" *ngIf="opportunity.locked === true"><br/>You don't have the requirements to learn more!</span>
					</div>

					<div class="row" *ngIf="opportunity.locked === false">
						<app-button label="Yes" ariaLabel="Click to learn about {{opportunity.name}}" clickData="true" (clickEvent)="selectOpportunity(opportunity, opportunity._id)" class="green col-centered"></app-button>
						<app-button label="No" ariaLabel="Click to close {{opportunity.name}} window" clickData="true" (clickEvent)="backToList(opportunity._id)" class="orange col-centered"></app-button>
					</div>
					<div class="row" *ngIf="opportunity.locked === true">
						<app-button label="Close" ariaLabel="Click to close {{opportunity.name}} window" clickData="true" (clickEvent)="backToList(opportunity._id)" class="orange col-centered"></app-button>
					</div>

			</div>
		</div>

</div>